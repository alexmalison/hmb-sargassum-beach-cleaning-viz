(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))e(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&e(o)}).observe(document,{childList:!0,subtree:!0});function a(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function e(n){if(n.ep)return;n.ep=!0;const i=a(n);fetch(n.href,i)}})();const he=52/12,ue=1,ce=["#64ffda","#90caf9","#ffd54f","#ff8a80","#ce93d8","#80cbc4"],re={seasonLengthMonths:5,sargassumVolumeM3:7183.15,workDaysPerWeek:6,workHoursPerDay:5,trailerCapacityM3:2,timePerWorkerLoadM3Minutes:25,atvSpeedKmh:3,beachLengthM:600,loadTransferTimeMinutes:11,loadingMode:"single"},fe={minutesPerSecond:ue,atvOverrideEnabled:!1,atvOverrideCount:null},ge=[{key:"seasonLengthMonths",label:"Length of season (months)",min:1,max:12,step:.1,section:"season"},{key:"sargassumVolumeM3",label:"Estimated Sargassum volume (m³)",min:0,max:2e4,step:10,section:"season"},{key:"workDaysPerWeek",label:"Working days per week",min:1,max:7,step:1,section:"season"},{key:"workHoursPerDay",label:"Working hours per day",min:1,max:24,step:.5,section:"season"},{key:"trailerCapacityM3",label:"Trailer capacity (m³)",min:.1,max:5,step:.1,section:"labor"},{key:"timePerWorkerLoadM3Minutes",label:"Time to load 1 m³ per worker (minutes)",min:1,max:60,step:1,section:"labor"},{key:"atvSpeedKmh",label:"ATV speed (km/h)",min:0,max:15,step:.1,section:"atv"},{key:"beachLengthM",label:"Beach length (m)",min:60,max:1500,step:10,section:"atv"},{key:"loadTransferTimeMinutes",label:"Load transfer wait (minutes)",min:0,max:60,step:1,section:"atv"},{key:"loadingMode",label:"Loading mode",type:"select",options:[{value:"single",label:"Whole crew from west"},{value:"split",label:"Split crews west/east"}],section:"labor"}],ye=[{key:"avgDailyRemoval",label:"Average daily removal (m³)",format:t=>b(t,{maximumFractionDigits:2})},{key:"avgHourlyRemoval",label:"Average hourly removal (m³)",format:t=>b(t,{maximumFractionDigits:2})},{key:"trailersPerDay",label:"Trailer loads per day",format:t=>b(t,{maximumFractionDigits:2})},{key:"timeWorkerLoadHours",label:"Worker hours to load trailers (per day)",format:t=>b(t,{maximumFractionDigits:2})},{key:"requiredBeachWorkers",label:"Beach workers required (load crew)",format:t=>b(t,{maximumFractionDigits:2})},{key:"timeToLoadTrailerMinutes",label:"Time to load trailer (minutes)",format:t=>b(t,{maximumFractionDigits:2})},{key:"timeToLoadingAreaMinutes",label:"Travel to loading area (minutes)",format:t=>b(t,{maximumFractionDigits:2})},{key:"totalAtvTimePerLoadMinutes",label:"ATV cycle time per load (minutes)",format:t=>b(t,{maximumFractionDigits:2})},{key:"timePerAtvHours",label:"ATV duty time (hours/day)",format:t=>b(t,{maximumFractionDigits:2})},{key:"requiredAtvs",label:"Required # of ATVs",format:t=>b(t,{maximumFractionDigits:2})},{key:"requiredAtvDrivers",label:"Required # of ATV drivers",format:t=>b(t,{maximumFractionDigits:2})},{key:"requiredUnloadWorkers",label:"Required # of unload workers",format:t=>b(t,{maximumFractionDigits:2})},{key:"integerLoads",label:"Loads simulated today",format:t=>b(t,{maximumFractionDigits:0})},{key:"integerAtvs",label:"ATVs in rotation",format:t=>b(t,{maximumFractionDigits:0})},{key:"totalMinutes",label:"Day cycle duration (minutes)",format:t=>b(t,{maximumFractionDigits:1}),note:"Full rotation for busiest ATV within the day"}];function b(t,l={}){return Number.isFinite(t)?new Intl.NumberFormat("en-US",{maximumFractionDigits:2,minimumFractionDigits:0,...l}).format(t):"—"}function Me(t){const l=t.seasonLengthMonths*he,a=l*t.workDaysPerWeek,e=a>0?t.sargassumVolumeM3/a:0,n=t.workHoursPerDay>0?e/t.workHoursPerDay:0,i=t.trailerCapacityM3>0?e/t.trailerCapacityM3:0,s=t.timePerWorkerLoadM3Minutes*e/60,d=t.workHoursPerDay>0?s/t.workHoursPerDay:0,S=d>0?t.trailerCapacityM3*t.timePerWorkerLoadM3Minutes/d:0,T=t.atvSpeedKmh*1e3/60,k=t.beachLengthM/2,P=T>0?k/T:0,D=P,M=P+S+D,L=M*i/60,y=t.workHoursPerDay>0?L/t.workHoursPerDay:0,A=y,h=t.workHoursPerDay>0?i*S/60/t.workHoursPerDay:0,u=Math.max(1,Math.round(i)),v=Math.max(1,Math.ceil(y));return{workingWeeks:l,workingDaysSeason:a,avgDailyRemoval:e,avgHourlyRemoval:n,trailersPerDay:i,timeWorkerLoadHours:s,requiredBeachWorkers:d,timeToLoadTrailerMinutes:S,timeToLoadingAreaMinutes:P,totalAtvTimePerLoadMinutes:M,timePerAtvHours:L,requiredAtvs:y,requiredAtvDrivers:A,requiredUnloadWorkers:h,integerLoads:u,integerAtvs:v}}function be(t,l,a={}){const e=l.integerLoads,n=Number(a.overrideAtvCount),i=Number.isFinite(n)&&n>0?Math.max(1,Math.round(n)):null,o=i??l.integerAtvs,s=[],d=[],S=Array.from({length:o},()=>[]),T=Array.from({length:o},()=>0),k=Math.max(0,t.loadTransferTimeMinutes??0);if(e<=0||o<=0)return{loadMarkers:s,segmentsByAtv:S,totalMinutes:0,numLoads:0,numAtvs:o,loadStates:d};const P=t.beachLengthM/e,D=l.timeToLoadTrailerMinutes,M=t.atvSpeedKmh>0?t.atvSpeedKmh*1e3/60:0;let L=0,y=0;const A=Array.from({length:e},(u,v)=>{const C=v*P,X=(v+1)*P,N=C+P/2;return{loadIndex:v+1,startPosM:C,endPosM:X,centerPosM:N}});s.push(...A.map(u=>u.centerPosM).sort((u,v)=>u-v));let h;if((t.loadingMode??"single")==="split"){h=[];let u=0,v=e-1,C=!0;for(;u<=v;)C?(h.push({...A[u],crew:"West crew"}),u+=1):(h.push({...A[v],crew:"East crew"}),v-=1),C=!C;h.length&&e%2===1&&(h[h.length-1].crew="Both crews")}else h=A.map(u=>({...u,crew:"Main crew"}));return h.forEach(u=>{const v=u.centerPosM,C=u.startPosM,X=u.endPosM,N=Math.min(v,5),Z=M>0?v/M:0,B=M>0?Math.max(v-N,0)/M:0,ee=M>0?N/M:0;let F=0,z=T[0];for(let m=1;m<o;m+=1)T[m]<z-Number.EPSILON&&(z=T[m],F=m);const J=T[F],Y=J+Z,$=Y+D,U=$+B,te=U+ee;let K=0,r=te;r<L&&(K=L-r,r=L);const c=r+k,g=m=>{S[F].push(m),y=Math.max(y,m.endMin)};g({atvId:F,loadId:u.loadIndex,phase:"outbound",startMin:J,endMin:Y,startPosM:0,endPosM:v}),g({atvId:F,loadId:u.loadIndex,phase:"loading",startMin:Y,endMin:$,startPosM:v,endPosM:v}),B>0?g({atvId:F,loadId:u.loadIndex,phase:"return",startMin:$,endMin:U,startPosM:v,endPosM:N}):g({atvId:F,loadId:u.loadIndex,phase:"return",startMin:$,endMin:$,startPosM:v,endPosM:N}),K>0&&g({atvId:F,loadId:u.loadIndex,phase:"hold",startMin:U,endMin:U+K,startPosM:N,endPosM:N}),g({atvId:F,loadId:u.loadIndex,phase:"approach",startMin:U+K,endMin:r,startPosM:N,endPosM:0}),g({atvId:F,loadId:u.loadIndex,phase:"transfer",startMin:r,endMin:c,startPosM:0,endPosM:0}),T[F]=c,L=c,d.push({startPosM:C,endPosM:X,arrivalMin:Y,cleanedAtMinute:$,crew:u.crew,loadId:u.loadIndex})}),{loadMarkers:s,segmentsByAtv:S.map(u=>u.sort((v,C)=>v.startMin-C.startMin)),totalMinutes:y,numLoads:e,numAtvs:o,loadStates:d,overrideAtvCount:i}}function Se(){const t=document.querySelector("#app");return t.innerHTML=`
    <section class="controls">
      <div class="control-header">
        <h1>HMB Beach Cleanup Model</h1>
        <p>Set the season-scale inputs from the spreadsheet; the animation shows how one workday plays out with those assumptions.</p>
      </div>
      <div class="controls-groups">
        <div class="control-group">
          <h2>Season Parameters</h2>
          <div class="input-grid" data-section="season"></div>
        </div>
        <div class="control-group">
          <h2>Trailer &amp; Labor</h2>
          <div class="input-grid" data-section="labor"></div>
        </div>
        <div class="control-group">
          <h2>ATV Operations</h2>
          <div class="input-grid" data-section="atv"></div>
          <div class="field override-field">
            <label for="atvOverrideToggle">Override # of ATVs</label>
            <div class="override-controls">
              <select id="atvOverrideToggle">
                <option value="no">No</option>
                <option value="yes">Yes</option>
              </select>
              <input
                type="number"
                id="atvOverrideInput"
                min="1"
                step="1"
                placeholder="Manual count"
              />
            </div>
            <span class="field-note" id="atvOverrideHint"></span>
          </div>
        </div>
      </div>
      <div class="derived-section" id="derivedSection">
        <div class="derived-header">
          <h2>Derived Metrics</h2>
          <button type="button" class="toggle-derived" id="toggleDerived">Hide metrics</button>
        </div>
        <ul class="metrics-list" id="derivedMetrics"></ul>
      </div>
      <div class="status" id="status"></div>
    </section>
    <section class="simulation">
      <div class="canvas-container">
        <canvas id="beachCanvas" width="960" height="520"></canvas>
        <div class="canvas-overlay canvas-overlay-top">
          <div class="sim-controls">
            <span id="timeLabel" class="sim-time">Sim time 00:00</span>
            <button type="button" id="toggleRun" class="toggle-run">Pause</button>
          </div>
          <div class="speed-slider">
            <input type="range" id="speedSlider" min="1" max="60" step="1" />
            <span id="speedValue"></span>
          </div>
        </div>
        <div class="canvas-overlay canvas-overlay-bottom">
          <span id="detailsLabel"></span>
        </div>
      </div>
    </section>
  `,{canvas:document.querySelector("#beachCanvas"),derivedList:document.querySelector("#derivedMetrics"),status:document.querySelector("#status"),timeLabel:document.querySelector("#timeLabel"),toggleButton:document.querySelector("#toggleRun"),detailsLabel:document.querySelector("#detailsLabel"),derivedSection:document.querySelector("#derivedSection"),derivedToggle:document.querySelector("#toggleDerived"),speedSlider:document.querySelector("#speedSlider"),speedValue:document.querySelector("#speedValue"),atvOverrideToggle:document.querySelector("#atvOverrideToggle"),atvOverrideInput:document.querySelector("#atvOverrideInput"),atvOverrideHint:document.querySelector("#atvOverrideHint")}}function Le(t,l){ge.forEach(a=>{const e=document.querySelector(`[data-section="${a.section}"]`);if(!e)return;const n=document.createElement("div");n.className="field";const i=document.createElement("label");i.textContent=a.label;let o;if(a.type==="select"&&Array.isArray(a.options))o=document.createElement("select"),a.options.forEach(s=>{const d=document.createElement("option");d.value=String(s.value),d.textContent=s.label,o.append(d)}),o.value=String(t[a.key]),o.addEventListener("change",()=>{const s=o.value,d=Number(s),T=a.options.every(k=>typeof k.value=="number")&&Number.isFinite(d)?d:s;l(a.key,T)});else{o=document.createElement("input");const s=a.type==="text"?"text":"number";if(o.type=s,a.key==="trailerCapacityM3"?o.value=Number(t[a.key]??0).toFixed(1):o.value=String(t[a.key]??""),a.placeholder&&(o.placeholder=a.placeholder),s==="number"){a.min!==void 0&&(o.min=String(a.min)),a.max!==void 0&&(o.max=String(a.max)),a.step!==void 0&&(o.step=String(a.step));const d=()=>{const S=Number(o.value);Number.isFinite(S)&&(l(a.key,S),a.key==="trailerCapacityM3"&&(o.value=S.toFixed(1)))};a.key==="trailerCapacityM3"?(o.addEventListener("change",d),o.addEventListener("blur",d)):o.addEventListener("input",d)}else o.addEventListener("input",()=>{l(a.key,o.value)})}n.append(i,o),e.append(n)})}function Ae(t,l){const a=document.querySelector("#speedSlider"),e=document.querySelector("#speedValue");if(!a||!e)return;const n=i=>{const o=Math.max(1,Math.round(i));e.textContent=`1 s → ${o} min`,l(i)};a.value=String(t.minutesPerSecond),n(t.minutesPerSecond),a.addEventListener("input",()=>{const i=Number(a.value);!Number.isFinite(i)||i<=0||(t.minutesPerSecond=i,n(i))})}function Te(t,l,a={}){const e=a.toggle??document.querySelector("#atvOverrideToggle"),n=a.input??document.querySelector("#atvOverrideInput");if(!e||!n)return;const i=s=>{n.disabled=!s,s||(t.atvOverrideCount=null,n.value="")};e.value=t.atvOverrideEnabled?"yes":"no",t.atvOverrideCount!=null&&(n.value=String(t.atvOverrideCount)),i(t.atvOverrideEnabled),e.addEventListener("change",()=>{const s=e.value==="yes";if(t.atvOverrideEnabled=s,s&&!n.value){const d=Number(e.dataset.computedAtvs);Number.isFinite(d)&&d>0&&(t.atvOverrideCount=Math.max(1,Math.round(d)),n.value=String(t.atvOverrideCount))}i(s),l()});const o=()=>{if(!t.atvOverrideEnabled)return;const s=Number(n.value);if(!Number.isFinite(s)||s<=0){t.atvOverrideCount=null,n.value="",l();return}t.atvOverrideCount=Math.round(s),n.value=String(t.atvOverrideCount),l()};n.addEventListener("blur",o),n.addEventListener("keydown",s=>{s.key==="Enter"&&o()})}function ke(t,l,a){t.innerHTML="",ye.forEach(e=>{let n;e.key==="totalMinutes"?n=a.totalMinutes:e.key==="integerAtvs"?n=a.integerAtvs??l.integerAtvs:n=l[e.key];const i=document.createElement("li");i.className="metric-card";const o=document.createElement("span");o.className="label",o.textContent=e.label;const s=document.createElement("span");if(s.className="value",s.textContent=e.format?e.format(n):String(n),i.append(o,s),e.key==="integerAtvs"&&a.overrideAtvs){const d=document.createElement("span");d.className="note";const S=b(a.computedIntegerAtvs,{maximumFractionDigits:0});d.textContent=`Manual override active (computed ${S})`,i.append(d)}else if(e.note){const d=document.createElement("span");d.className="note",d.textContent=e.note,i.append(d)}t.append(i)})}function Pe(t,l,a){const e=t.getContext("2d"),n=t.width,i=t.height,o=70;let s={loadMarkers:[],loadStates:[],segmentsByAtv:[],totalMinutes:1,numAtvs:0,beachLength:re.beachLengthM},d={...re},S=ue,T=[],k=!1,P=!1,D=0,M=null,L=null;const y=new Set,A=i*.3,h=i*.7;function u(){const r={paused:B(),manuallyPaused:k,autoPaused:P};y.forEach(c=>{try{c(r)}catch{}})}function v(){L!==null&&(cancelAnimationFrame(L),L=null)}function C(){L===null&&!B()&&(L=requestAnimationFrame(K))}function X(r,c){s={...r,beachLength:c.beachLengthM},d={...c},T=new Array(s.numAtvs).fill(1),D=0,M=null,P=!1,u(),C()}function N(r){S=r,M=null}function Z(r){const c=k;return typeof r=="boolean"?k=r:k=!k,k?c||v():(P&&(P=!1,D=0),M=null,C()),u(),k}function B(){return k||P}function ee(r){return typeof r!="function"?()=>{}:(y.add(r),r({paused:B(),manuallyPaused:k,autoPaused:P}),()=>{y.delete(r)})}function F(r){const c=Math.floor(r/60),g=Math.floor(r%60),m=Math.floor(r%1*60),q=`${String(c).padStart(2,"0")}:${String(g).padStart(2,"0")}:${String(m).padStart(2,"0")}`;l&&(l.textContent=`Sim time ${q}`)}function z(){e.fillStyle="#0f2034",e.fillRect(0,0,n,i);const r=e.createLinearGradient(0,A,0,h);r.addColorStop(0,"rgba(230, 254, 255, 0.08)"),r.addColorStop(.5,"rgba(110, 192, 230, 0.18)"),r.addColorStop(1,"rgba(255, 255, 255, 0.05)"),e.fillStyle=r,e.fillRect(o,A,n-o*2,h-A),e.strokeStyle="rgba(255, 255, 255, 0.25)",e.lineWidth=2,e.beginPath(),e.moveTo(o,h),e.lineTo(n-o,h),e.stroke(),e.save(),e.textAlign="center",e.fillStyle="rgba(255, 255, 255, 0.7)",e.font='16px "Inter", sans-serif';const c=Math.min(i-12,h+28),g=b(d.beachLengthM,{maximumFractionDigits:0});e.fillText(`Beach length = ${g} m`,n/2,c),e.restore()}function J(r){const c=n-o*2,m=(h-A)*.25,q=h-m;s.loadStates.forEach(x=>{const p=o+x.startPosM/s.beachLength*c,H=o+x.endPosM/s.beachLength*c,I=x.arrivalMin,f=x.cleanedAtMinute;if(f<=0||r>=f)return;let R=1;if(r>I){const E=Math.max(f-I,.01),w=Math.min(Math.max((r-I)/E,0),1);R=Math.max(0,1-w)}e.save(),e.globalAlpha=R;const O=e.createLinearGradient(p,q,H,h);O.addColorStop(0,"rgba(121, 85, 72, 0.92)"),O.addColorStop(.5,"rgba(93, 64, 55, 0.95)"),O.addColorStop(1,"rgba(121, 85, 72, 0.92)"),e.fillStyle=O,e.fillRect(p,q,H-p,m),e.restore()})}function Y(r,c,g=1){if(!r.length)return{position:0,phase:"idle",loadId:null,direction:g,progress:0};const m=r[r.length-1].endMin;if(m===0)return{position:0,phase:"idle",loadId:null,direction:g,progress:0};let q=c%m,x=g;for(let I=0;I<r.length;I+=1){const f=r[I];if(q<f.startMin)return{position:f.startPosM,phase:"idle",loadId:f.loadId,direction:x,progress:0};if(q<=f.endMin||f.endMin===f.startMin){const R=f.endMin-f.startMin,O=R>0?(q-f.startMin)/R:1,E=f.startPosM+(f.endPosM-f.startPosM)*O,w=Math.sign(f.endPosM-f.startPosM);return w!==0&&(x=w),{position:E,phase:f.phase,loadId:f.loadId,direction:x,progress:O}}}const p=r[r.length-1],H=Math.sign(p.endPosM-p.startPosM);return H!==0&&(x=H),{position:p.endPosM,phase:"idle",loadId:p.loadId,direction:x,progress:0}}function $(){e.strokeStyle="rgba(255, 255, 255, 0.12)",e.lineWidth=1,e.setLineDash([6,8]),s.loadMarkers.forEach(r=>{const c=o+r/s.beachLength*(n-o*2);e.beginPath(),e.moveTo(c,A),e.lineTo(c,h),e.stroke()}),e.setLineDash([])}function U(r,c,g,m=1,q=!1){e.save();const x=5,p=28,H=12,I=36,f=14,R=8,O=m>=0?1:-1,E=r-p/2,w=c-x-H,W=E+p,oe=c-x-f+2;let V,_,j,ne;if(O>=0?(_=E-R,V=_-I,j=E,ne=_):(V=W+R,_=V+I,j=W,ne=V),e.fillStyle=g,e.fillRect(E,w,p,H),e.fillStyle="rgba(255, 255, 255, 0.2)",e.fillRect(E+6,w+3,12,H-6),e.fillStyle=g,e.fillRect(V,oe,I,f),q){const G=f*.9,le=I*.08,ae=V+le,de=_-le,Q=oe+2,pe=Q-G;e.fillStyle="#8d6e63",e.beginPath(),e.moveTo(ae,Q),e.quadraticCurveTo((ae+de)/2,pe,de,Q),e.lineTo(ae,Q),e.closePath(),e.fill()}e.strokeStyle="rgba(255, 255, 255, 0.4)",e.lineWidth=2,e.beginPath(),e.moveTo(j,c-x-2),e.lineTo(ne,c-x+1),e.stroke();const ie="rgba(15, 32, 52, 0.85)",me=[{x:E+p*.25,y:c},{x:W-p*.25,y:c},{x:V+I*.2,y:c+1},{x:_-I*.2,y:c+1}];e.fillStyle=ie,me.forEach(G=>{e.beginPath(),e.arc(G.x,G.y,x,0,Math.PI*2),e.fill(),e.fillStyle="rgba(255, 255, 255, 0.25)",e.beginPath(),e.arc(G.x,G.y,x*.4,0,Math.PI*2),e.fill(),e.fillStyle=ie}),e.fillStyle="rgba(15, 32, 52, 0.85)";const se=12,ve=O>=0?W-se+2:E-2;e.fillRect(ve,w-6,se,6),e.beginPath(),O>=0?(e.moveTo(W-p*.7,w),e.lineTo(W-p*.4,w-8),e.lineTo(W-p*.15,w-8),e.lineTo(W-p*.3,w)):(e.moveTo(E+p*.7,w),e.lineTo(E+p*.4,w-8),e.lineTo(E+p*.15,w-8),e.lineTo(E+p*.3,w)),e.closePath(),e.fill(),e.restore()}function te(r){const c=[];s.segmentsByAtv.forEach((g,m)=>{const q=T[m]??1,{position:x,phase:p,loadId:H,direction:I,progress:f}=Y(g,r,q);T[m]=I||q||1;const R=ce[m%ce.length],O=o+x/s.beachLength*(n-o*2),E=h-30-m*18,w=.001,W=p==="loading"&&f>=1-w||p==="return"||p==="hold"||p==="approach"||p==="transfer"&&f<1-w;U(O,E,R,T[m],W),e.fillStyle=R,e.font='12px "Inter", sans-serif',e.fillText(`ATV ${m+1}`,O-20,E+22);const V=(H?s.loadStates.find(j=>j.loadId===H):void 0)?.crew??"Crew",_=b(d.trailerCapacityM3,{minimumFractionDigits:1,maximumFractionDigits:1});c.push(`ATV ${m+1}: ${p} load ${H??"—"} (${V}, capacity ${_} m³)`)}),a.textContent=c.join("  •  ")}function K(r){if(B()){L=null;return}M===null&&(M=r);const c=Math.max((r-M)/1e3,0);M=r;const g=Math.max(s.totalMinutes,1);D+=c*S,D>g&&(D=g);const m=D;if(z(),J(m),$(),te(m),F(m),D>=g){P=!0,L=null,u();return}L=requestAnimationFrame(K)}return C(),{update:X,updateSpeed:N,toggleManualPause:Z,isPaused:B,onStateChange:ee}}function xe(t,l,a){if(l.atvSpeedKmh<=0){t.textContent="Increase ATV speed above zero to animate the transport cycle.";return}if(a.trailersPerDay<=0||a.requiredAtvs<=0){t.textContent="Adjust inputs to produce a non-zero workload for ATVs.";return}t.textContent=""}function we(){const t={...re},l={...fe},{canvas:a,derivedList:e,status:n,timeLabel:i,toggleButton:o,detailsLabel:s,derivedSection:d,derivedToggle:S,atvOverrideToggle:T,atvOverrideInput:k,atvOverrideHint:P}=Se(),D=Pe(a,i,s);let M=!1;function L(){const y=Me(t),A=l.atvOverrideEnabled?l.atvOverrideCount:null,h=be(t,y,{overrideAtvCount:A}),u={totalMinutes:h.totalMinutes,integerAtvs:h.numAtvs,overrideAtvs:h.overrideAtvCount!=null,computedIntegerAtvs:y.integerAtvs};if(ke(e,y,u),xe(n,t,y),D.update(h,t),P){const v=b(y.integerAtvs,{maximumFractionDigits:0});if(h.overrideAtvCount!=null){const C=b(h.overrideAtvCount,{maximumFractionDigits:0});P.textContent=`Manual override active (${C} ATVs, computed ${v}).`}else P.textContent=`Using computed requirement (${v} ATVs).`}if(T&&(T.dataset.computedAtvs=String(y.integerAtvs)),k){const v=b(y.integerAtvs,{maximumFractionDigits:0});(!l.atvOverrideEnabled||l.atvOverrideCount==null)&&(k.placeholder=`Computed ${v}`)}}if(Le(t,(y,A)=>{t[y]=A,L()}),Ae(l,y=>{D.updateSpeed(y)}),o){const y=({paused:A})=>{o.textContent=A?"Run":"Pause"};D.onStateChange(y),o.addEventListener("click",()=>{const A=D.isPaused();D.toggleManualPause(!A)})}Te(l,L,{toggle:T,input:k}),S.addEventListener("click",()=>{M=!M,d.classList.toggle("collapsed",M),S.textContent=M?"Show metrics":"Hide metrics"}),L()}we();
